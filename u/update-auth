#!/usr/bin/env raku
use v6;
use Grammar::Tracer;

sub ensure-authors-correct-in-toml($file, $auth-string) {
    my $toml = $file.IO.slurp;
    $toml ~~ s/authors\N+/$auth-string/;
    $file.IO.spurt: $toml;

}

my $auth-string = qq:to/END/;
authors = [ 
    "Adam Raisbeck <sense@i2pi.com>",
    "Alec DiAstra <alecdiastra@gmail.com>",
    "Alexandre Bique <bique.alexandre@gmail.com>",
    "Amy Furniss <http://github.com/amyfurniss>",
    "Brian Ginsburg <https://github.com/bgins>",
    "Cale Gibbard <cgibbard@gmail.com>",
    "Claes Johanson <claes@bitwig.com>",
    "Dave Palmer <itsmedavep@gmail.com>",
    "David Bata <https://github.com/tank-trax>",
    "David Carlier <devnexen@gmail.com>",
    "Erik-Jan Maalderink <fonkle@gmx.com>",
    "Esa Juhani Ruoho <esaruoho@gmail.com>",
    "Filipe Coelho <falktx@falktx.com>",
    "Hendrik van Boetzelaer <http://opuswerk.com>",
    "Jacky Ligon <http://jackyligon.com>",
    "Jani Frilander <http://github.com/janifr>",
    "Jarkko Sakkinen <jarkko.sakkinen@iki.fi>",
    "Jatin Chowdhury <jatin@ccrma.stanford.edu>",
    "Jean Pierre Cimalando <jp-dev@inbox.ru>",
    "Jeff Smith <whydoubt@gmail.com>",
    "Jeremy Sagan <info@sagantech.biz>",
    "Jon Spruyt <http://jonspru.yt>",
    "Keith Zantow <kzantow@gmail.com>",
    "Kjetil Matheussen <k.s.matheussen@notam02.no>",
    "Korridor <fabian.kempe@gmail.com>",
    "Luna Langton <https://github.com/selenologist>",
    "Mario Krušelj a.k.a. EvilDragon <http://github.com/mkruselj>",
    "Markku Tavasti <tavasti@iki.fi>",
    "Marty Lake <matthieu@talbot.audio>",
    "Matthias von Faber <http://github.com/mvf>",
    "Mikko Saarinki <https://github.com/kingston1>",
    "Nathan Kopp <nk.sg@nathankopp.com>",
    "Paul Walker <paul@pwjw.com>",
    "Rich Elmes <richie@juic3.com>",
    "Sebastian Schwarzhuber <https://github.com/cannero>",
    "The Emu (J Riley Hill) <http://jrileyhill.com>",
    "Vincent Zauhar <v.zauhar@bell.net>",
    "klebs <none>",
    "muhl <https://github.com/mynameismuhl>",
    "簡志瑋 <dppss92132@gmail.com>",
    ]
END

my @tomls = [
    "surge-adsr/Cargo.toml",
    "surge-biquad/Cargo.toml",
    "surge-blitter/Cargo.toml",
    "surge-coeffmaker/Cargo.toml",
    "surge-constants/Cargo.toml",
    "surge-filter/Cargo.toml",
    "surge-halfrate/Cargo.toml",
    "surge-input/Cargo.toml",
    "surge-lag/Cargo.toml",
    "surge-lfo/Cargo.toml",
    "surge-lipol/Cargo.toml",
    "surge-macros/Cargo.toml",
    "surge-math/Cargo.toml",
    "surge-midi/Cargo.toml",
    "surge-modulation/Cargo.toml",
    "surge-mpe/Cargo.toml",
    "surge-output/Cargo.toml",
    "surge-param/Cargo.toml",
    "surge-qfunit/Cargo.toml",
    "surge-quadrosc/Cargo.toml",
    "surge-samplerate/Cargo.toml",
    "surge-scene/Cargo.toml",
    "surge-svf/Cargo.toml",
    "surge-synthesizer/Cargo.toml",
    "surge-tables/Cargo.toml",
    "surge-timeunit/Cargo.toml",
    "surge-traits/Cargo.toml",
    "surge-tuning/Cargo.toml",
    "surge-types/Cargo.toml",
    "surge-voice/Cargo.toml",
    "surge-wavetable/Cargo.toml",
    "surgefilter-comb/Cargo.toml",
    "surgefilter-diode/Cargo.toml",
    "surgefilter-huovilainen/Cargo.toml",
    "surgefilter-iir/Cargo.toml",
    "surgefilter-k35/Cargo.toml",
    "surgefilter-moog/Cargo.toml",
    "surgefilter-nlfeedback/Cargo.toml",
    "surgefilter-nlstates/Cargo.toml",
    "surgefilter-obxd/Cargo.toml",
    "surgefilter-rungekutta/Cargo.toml",
    "surgefilter-snh/Cargo.toml",
    "surgefilter-svf/Cargo.toml",
    "surgefx-allpass/Cargo.toml",
    "surgefx-chorus/Cargo.toml",
    "surgefx-conditioner/Cargo.toml",
    "surgefx-distortion/Cargo.toml",
    "surgefx-dualdelay/Cargo.toml",
    "surgefx-emphasize/Cargo.toml",
    "surgefx-eq3band/Cargo.toml",
    "surgefx-flanger/Cargo.toml",
    "surgefx-freqshift/Cargo.toml",
    "surgefx-phaser/Cargo.toml",
    "surgefx-reverb/Cargo.toml",
    "surgefx-ringmod/Cargo.toml",
    "surgefx-rotary/Cargo.toml",
    "surgefx-vocoder/Cargo.toml",
    "surgefx/Cargo.toml",
    "surgeosc-audioin/Cargo.toml",
    "surgeosc-fm/Cargo.toml",
    "surgeosc-fm2/Cargo.toml",
    "surgeosc-sine/Cargo.toml",
    "surgeosc-snh/Cargo.toml",
    "surgeosc-super/Cargo.toml",
    "surgeosc-wavetable/Cargo.toml",
    "surgeosc-window/Cargo.toml",
    "surgeshaper-asym/Cargo.toml",
    "surgeshaper-clip/Cargo.toml",
    "surgeshaper-digi/Cargo.toml",
    "surgeshaper-sine/Cargo.toml",
    "surgeshaper-tanh/Cargo.toml",
];

for @tomls {
    ensure-authors-correct-in-toml($_, $auth-string);
}
